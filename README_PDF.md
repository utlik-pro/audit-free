# –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF-–æ—Ç—á–µ—Ç–æ–≤

## –û–±–∑–æ—Ä

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —à–∞–±–ª–æ–Ω PDF `Audit_v1.1.pdf` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/utils/
‚îú‚îÄ‚îÄ pdfGenerator.ts          # –û—Å–Ω–æ–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF
‚îú‚îÄ‚îÄ auditTemplate.ts         # Base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω PDF
‚îú‚îÄ‚îÄ convertPdfToBase64.ts    # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ robotoFont.ts            # –®—Ä–∏—Ñ—Ç PT Sans –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
‚îî‚îÄ‚îÄ fontLoader.ts            # –ó–∞–≥—Ä—É–∑—á–∏–∫ —à—Ä–∏—Ñ—Ç–æ–≤
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF

### 1. –®–∞–±–ª–æ–Ω PDF
- –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: `Audit_v1.1.pdf` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ base64 –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ `auditTemplate.ts`
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω: –ª–æ–≥–æ—Ç–∏–ø, —Å—Ç—Ä—É–∫—Ç—É—Ä—É, QR-–∫–æ–¥

### 2. –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```typescript
import { generateDiagnosticPDF } from '@/utils/pdfGenerator';

await generateDiagnosticPDF({
  totalScore: 15,
  categoryScores: {
    data: 4,
    processes: 3,
    people: 4,
    results: 4,
  },
  interpretation: {
    emoji: 'üü¢',
    title: '–ó–æ–Ω–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏',
    description: '–í–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞ –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –ò–ò',
    recommendations: [...]
  },
  contactInfo: {
    name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
    phone: '+7 999 123-45-67',
    email: 'ivan@example.com',
    wantsDeepAudit: true
  },
  auditNumber: 42,
  completedAt: new Date()
});
```

### 3. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **pdf-lib** - –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö PDF
- **@pdf-lib/fontkit** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö —à—Ä–∏—Ñ—Ç–æ–≤
- **PT Sans** - —à—Ä–∏—Ñ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ PDF

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏–∑–∞–π–Ω —à–∞–±–ª–æ–Ω–∞:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π PDF –≤ Canva/Figma
- –†–∞–∑–º–µ—Ä: A4 (210x297 –º–º)
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `Audit_v1.1.pdf` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 2: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ base64
```bash
npx tsx src/utils/convertPdfToBase64.ts
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç `src/utils/auditTemplate.ts`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ pdfGenerator.ts

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö (–æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞):

```typescript
// –ú–∞—Å–∫–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–ª—ã–º —Ü–≤–µ—Ç–æ–º
drawMask(x_mm, y_mm, width_mm, height_mm, COLORS.white);

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
drawText('–¢–µ–∫—Å—Ç', x_mm, y_mm, fontSize, {
  color: COLORS.textDark,
  align: 'left' | 'center' | 'right',
  maxWidthMm: 150,  // –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫
});
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
- –ü—Ä–æ–π–¥–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –¥–æ –∫–æ–Ω—Ü–∞
- –°–∫–∞—á–∞–π—Ç–µ PDF –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ–∫—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (Audit_v1.1.pdf):

```typescript
// –®–∞–ø–∫–∞
–ù–æ–º–µ—Ä –∞—É–¥–∏—Ç–∞:  x=30mm,  y=45mm
–î–∞—Ç–∞:          x=135mm, y=45mm

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
–ó–∞–≥–æ–ª–æ–≤–æ–∫:     x=105mm, y=85mm  (—Ü–µ–Ω—Ç—Ä)
–û–±—â–∏–π –±–∞–ª–ª:    x=105mm, y=105mm (—Ü–µ–Ω—Ç—Ä, 48pt)
–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: x=105mm, y=135mm (—Ü–µ–Ω—Ç—Ä)

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
–ù–∞—á–∞–ª–æ:        x=35mm,  y=188mm
–ò–Ω—Ç–µ—Ä–≤–∞–ª:      12mm –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏

// –ö–æ–Ω—Ç–∞–∫—Ç—ã
–ó–∞–≥–æ–ª–æ–≤–æ–∫:     x=30mm,  y=238mm
–î–∞–Ω–Ω—ã–µ:        x=35mm,  y=248mm (—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 8mm)

// –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
–ó–∞–≥–æ–ª–æ–≤–æ–∫:     x=30mm,  y=286mm
–¢–µ–∫—Å—Ç:         x=35mm,  y=296mm
```

## –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

```typescript
const COLORS = {
  textDark: [10, 10, 10],         // –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
  textLight: [255, 255, 255],     // –¢–µ–∫—Å—Ç –Ω–∞ —Ç–µ–º–Ω–æ–º —Ñ–æ–Ω–µ
  muted: [120, 120, 120],         // –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç
  green: [34, 197, 94],           // –£—Å–ø–µ—Ö
  amber: [234, 179, 8],           // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
  red: [239, 68, 68],             // –û—à–∏–±–∫–∞
  white: [255, 255, 255],         // –ú–∞—Å–∫–∞
  header: [0, 0, 0],              // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω —à–∞–ø–∫–∏
};
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ–∫—Å—Ç –Ω–µ –≤–∏–¥–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∞—Å–∫–∞ (`drawMask`) –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ü–≤–µ—Ç –º–∞—Å–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ–Ω—É (`COLORS.white` –¥–ª—è –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞)

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–ª–ª–∏–º–µ—Ç—Ä—ã, –Ω–µ –ø–∏–∫—Å–µ–ª–∏
- –§—É–Ω–∫—Ü–∏—è `fromTop()` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç –≤–µ—Ä—Ö–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã A4: 297mm

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `robotoFont` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `font: robotoFont` –≤ –æ–ø—Ü–∏—è—Ö

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```typescript
const results = calculateResults();
await generateDiagnosticPDF({
  ...results,
  contactInfo,
  auditNumber,
  completedAt: new Date()
});
```

### –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```typescript
// –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–∏
await generateDiagnosticPDF(results, {
  filename: 'custom-name.pdf',
  includeQRCode: true,
  language: 'ru'
});
```

## –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ

- –®–∞–±–ª–æ–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ Canva
- –®—Ä–∏—Ñ—Ç: PT Sans (Open Font License)
- –õ–æ–≥–æ—Ç–∏–ø –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥: Utlik.co
